(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54858,e=>{"use strict";function o(){return"https://production-rag-agent-production.up.railway.app/".replace(/\/+$/,"")}async function t(e,t){let s=new FormData;for(let o of e)s.append("files",o);let r=await fetch(`${o()}/upload`,{method:"POST",headers:{"x-session-id":t},body:s}),n=await r.text();if(!r.ok)throw Error(`Upload failed (${r.status}): ${n}`);return JSON.parse(n)}async function s(e,t,s){console.log(`ðŸ“¤ [UPLOAD] Starting sequential upload of ${e.length} files`),console.log(`ðŸ“¤ [UPLOAD] Session ID: ${t}`);let r=[];for(let n=0;n<e.length;n++){let a=e[n];console.log(`ðŸ“¤ [UPLOAD] Uploading file ${n+1}/${e.length}: ${a.name} (${a.size} bytes)`),s?.(n+1,e.length,a.name);let i=new FormData;i.append("files",a);let l=await fetch(`${o()}/upload`,{method:"POST",headers:{"x-session-id":t},body:i}),c=await l.text();if(console.log(`ðŸ“¤ [UPLOAD] Response for ${a.name}:`,c),!l.ok)throw console.error(`ðŸ“¤ [UPLOAD] Failed for ${a.name}:`,c),Error(`Upload failed for "${a.name}" (${l.status}): ${c}`);let u=JSON.parse(c);r.push(u),console.log(`ðŸ“¤ [UPLOAD] Success for ${a.name}:`,u),n<e.length-1&&(console.log(`ðŸ“¤ [UPLOAD] Waiting 500ms before next upload...`),await new Promise(e=>setTimeout(e,500)))}return console.log(`ðŸ“¤ [UPLOAD] All uploads complete! Total files: ${r.length}`),r}async function r(e){console.log(`ðŸ”¨ [BUILD] Starting build for session: ${e}`),console.log(`ðŸ”¨ [BUILD] API URL: ${o()}/build`);let t=new AbortController,s=setTimeout(()=>t.abort(),18e4);try{let r=await fetch(`${o()}/build`,{method:"POST",headers:{"x-session-id":e},signal:t.signal});clearTimeout(s),console.log(`ðŸ”¨ [BUILD] Response status: ${r.status}`),console.log(`ðŸ”¨ [BUILD] Response ok: ${r.ok}`);let n=await r.text();if(console.log(`ðŸ”¨ [BUILD] Response text:`,n),!r.ok){let e=n;try{let o=JSON.parse(n);e=o.detail||o.message||n}catch{}throw console.error(`ðŸ”¨ [BUILD] Error detail:`,e),Error(`Build failed (${r.status}): ${e}`)}let a=n?JSON.parse(n):{status:"success"};return console.log(`ðŸ”¨ [BUILD] Success!`,a),a}catch(o){if(clearTimeout(s),console.error(`ðŸ”¨ [BUILD] Error caught:`,o),console.error(`ðŸ”¨ [BUILD] Error name:`,o.name),console.error(`ðŸ”¨ [BUILD] Error message:`,o.message),"AbortError"===o.name)throw Error("Build timeout: Processing is taking longer than expected.\n\nThis usually happens with:\nâ€¢ Multiple large documents\nâ€¢ Slow embedding generation\nâ€¢ Backend server overload\n\nTry: Refresh the page and upload files one at a time.");if("Failed to fetch"===o.message)throw Error('Network error: Cannot reach backend server.\n\nPossible causes:\nâ€¢ Session "'+e+'" has no documents (try uploading again)\nâ€¢ Backend crashed during previous build (refresh page)\nâ€¢ Network connectivity issue\n\nTry: Click "START OVER" to reset the session.');throw o}}async function n(e,t,s=3){let r=await fetch(`${o()}/ask`,{method:"POST",headers:{"Content-Type":"application/json","x-session-id":t},body:JSON.stringify({query:e,k:s})}),a=await r.text();if(!r.ok)throw Error(`Ask failed (${r.status}): ${a}`);return JSON.parse(a)}async function a(e){let t=await fetch(`${o()}/status`,{method:"GET",headers:{"x-session-id":e}}),s=await t.text();if(!t.ok)throw Error(`Status failed (${t.status}): ${s}`);return JSON.parse(s)}async function i(e){let t=await fetch(`${o()}/files`,{method:"GET",headers:{"x-session-id":e}}),s=await t.text();if(!t.ok)throw Error(`Files failed (${t.status}): ${s}`);return JSON.parse(s)}function l(){return`session-${Date.now()}-${Math.random().toString(36).substring(7)}`}e.s(["apiBaseUrl",()=>o,"askQuestion",()=>n,"buildIndex",()=>r,"generateSessionId",()=>l,"getFiles",()=>i,"getStatus",()=>a,"uploadDocuments",()=>t,"uploadDocumentsSequential",()=>s])},11047,e=>{e.v(e=>Promise.resolve().then(()=>e(54858)))}]);